import{s as fe,w as ee,d as T,x as te,i as J,b as d,q as ue,z as me,A as ce,l as _,c as E,e as A,g as y,m as le,h as S,j as k,n as ge,a as de,f as pe,t as he}from"../chunks/CukiabJc.js";import{S as _e,i as be,f as se,d as G,t as I,a as b,e as $e,m as P,c as q,b as B,g as we}from"../chunks/BWg-T3m7.js";import{g as ae}from"../chunks/Uwlk8-I3.js";import{B as ve,g as Ie,a as ye,l as ke}from"../chunks/BkWhDSw7.js";import{H as Ee,p as Se}from"../chunks/BaVsN4y3.js";import{g as Te,f as xe}from"../chunks/B-q6yMTh.js";import{S as Le,G as Ge,F as Pe,g as qe}from"../chunks/DedbV49y.js";import{T as re}from"../chunks/BzMIM7sd.js";const Be=""+new URL("../assets/hero-login.BrIr1BFK.png",import.meta.url).href;function De(n){let s,e='<h1 class="text-5xl font-black mb-4 text-center">Welcome back</h1> <p class="max-w text-lg text-center">The game never stopped.</p> <p class="max-w text-4xl font-black text-center mt-6 text-primary-500">Take back control.</p>';return{c(){s=S("div"),s.innerHTML=e,this.h()},l(a){s=E(a,"DIV",{class:!0,"data-svelte-h":!0}),le(s)!=="svelte-1wb9zyi"&&(s.innerHTML=e),this.h()},h(){_(s,"class","max-w-112 mx-auto pb-24")},m(a,l){J(a,s,l)},p:ge,d(a){a&&T(s)}}}function ne(n){let s,e;return s=new Pe({props:{error:n[4]}}),{c(){B(s.$$.fragment)},l(a){q(s.$$.fragment,a)},m(a,l){P(s,a,l),e=!0},p(a,l){const p={};l&16&&(p.error=a[4]),s.$set(p)},i(a){e||(b(s.$$.fragment,a),e=!0)},o(a){I(s.$$.fragment,a),e=!1},d(a){G(s,a)}}}function Fe(n){let s=n[2]?"Signing In...":"Sign In",e;return{c(){e=he(s)},l(a){e=pe(a,s)},m(a,l){J(a,e,l)},p(a,l){l&4&&s!==(s=a[2]?"Signing In...":"Sign In")&&de(e,s)},d(a){a&&T(e)}}}function He(n){let s,e,a,l,p,c,o,V,M,D,u,r,g,F,$,z,R,w,U,x,O,v,W,L,Q=`Don&#39;t have an account?
						<a href="/users/register" class="text-primary-400 hover:text-primary-500 underline">Create one</a>`,j,K,X;e=new Ee({props:{image:Be,$$slots:{default:[De]},$$scope:{ctx:n}}});let f=n[4]&&ne(n);function oe(t){n[7](t)}let Y={label:"Email",id:"email",inputType:"text",disabled:n[2],placeholder:"Enter your email"};n[0]!==void 0&&(Y.value=n[0]),r=new re({props:Y}),ee.push(()=>se(r,"value",oe));function ie(t){n[8](t)}let Z={label:"Password",id:"password",inputType:"password",disabled:n[2],placeholder:"Enter your password"};return n[1]!==void 0&&(Z.value=n[1]),$=new re({props:Z}),ee.push(()=>se($,"value",ie)),w=new ve({props:{color:"primary",style:"normal",altText:"Sign in to your account",fullWidth:!0,loading:n[2],disabled:n[2]||n[3],$$slots:{default:[Fe]},$$scope:{ctx:n}}}),w.$on("clicked",n[5]),x=new Le({}),v=new Ge({props:{loading:n[3],disabled:n[2]||n[3]}}),v.$on("click",n[6]),{c(){s=S("div"),B(e.$$.fragment),a=k(),l=S("section"),p=S("div"),c=S("div"),o=S("img"),M=k(),f&&f.c(),D=k(),u=S("form"),B(r.$$.fragment),F=k(),B($.$$.fragment),R=k(),B(w.$$.fragment),U=k(),B(x.$$.fragment),O=k(),B(v.$$.fragment),W=k(),L=S("p"),L.innerHTML=Q,this.h()},l(t){s=E(t,"DIV",{class:!0});var i=A(s);q(e.$$.fragment,i),a=y(i),l=E(i,"SECTION",{class:!0});var C=A(l);p=E(C,"DIV",{class:!0});var H=A(p);c=E(H,"DIV",{class:!0});var h=A(c);o=E(h,"IMG",{src:!0,alt:!0,class:!0}),M=y(h),f&&f.l(h),D=y(h),u=E(h,"FORM",{class:!0});var m=A(u);q(r.$$.fragment,m),F=y(m),q($.$$.fragment,m),R=y(m),q(w.$$.fragment,m),U=y(m),q(x.$$.fragment,m),O=y(m),q(v.$$.fragment,m),W=y(m),L=E(m,"P",{class:!0,"data-svelte-h":!0}),le(L)!=="svelte-uzcwun"&&(L.innerHTML=Q),m.forEach(T),h.forEach(T),H.forEach(T),C.forEach(T),i.forEach(T),this.h()},h(){ce(o.src,V=qe)||_(o,"src",V),_(o,"alt","Game Logo"),_(o,"class","mx-auto mb-8 select-none"),_(L,"class","text-center text-primary-200 mt-4 select-none"),_(u,"class","space-y-4"),_(c,"class","max-w-md mx-auto"),_(p,"class","md:min-h-screen text-white p-8"),_(l,"class","md:basis-3/5"),_(s,"class","flex md:flex-row flex-col-reverse h-full")},m(t,i){J(t,s,i),P(e,s,null),d(s,a),d(s,l),d(l,p),d(p,c),d(c,o),d(c,M),f&&f.m(c,null),d(c,D),d(c,u),P(r,u,null),d(u,F),P($,u,null),d(u,R),P(w,u,null),d(u,U),P(x,u,null),d(u,O),P(v,u,null),d(u,W),d(u,L),j=!0,K||(X=ue(u,"submit",me(n[5])),K=!0)},p(t,[i]){const C={};i&512&&(C.$$scope={dirty:i,ctx:t}),e.$set(C),t[4]?f?(f.p(t,i),i&16&&b(f,1)):(f=ne(t),f.c(),b(f,1),f.m(c,D)):f&&(we(),I(f,1,1,()=>{f=null}),$e());const H={};i&4&&(H.disabled=t[2]),!g&&i&1&&(g=!0,H.value=t[0],te(()=>g=!1)),r.$set(H);const h={};i&4&&(h.disabled=t[2]),!z&&i&2&&(z=!0,h.value=t[1],te(()=>z=!1)),$.$set(h);const m={};i&4&&(m.loading=t[2]),i&12&&(m.disabled=t[2]||t[3]),i&516&&(m.$$scope={dirty:i,ctx:t}),w.$set(m);const N={};i&8&&(N.loading=t[3]),i&12&&(N.disabled=t[2]||t[3]),v.$set(N)},i(t){j||(b(e.$$.fragment,t),b(f),b(r.$$.fragment,t),b($.$$.fragment,t),b(w.$$.fragment,t),b(x.$$.fragment,t),b(v.$$.fragment,t),j=!0)},o(t){I(e.$$.fragment,t),I(f),I(r.$$.fragment,t),I($.$$.fragment,t),I(w.$$.fragment,t),I(x.$$.fragment,t),I(v.$$.fragment,t),j=!1},d(t){t&&T(s),G(e),f&&f.d(),G(r),G($),G(w),G(x),G(v),K=!1,X()}}}function Me(n,s,e){let a="",l="",p=!1,c=!1,o="";async function V(){if(e(4,o=""),!a.trim()){e(4,o="Email is required");return}if(!l){e(4,o="Password is required");return}e(2,p=!0);try{const r=await xe(a.trim(),l),g=await Ie(r.uid);if(Se.set(g),g.labelIds&&g.labelIds.length>0){const F=await ye(g.labelIds);F.length>0&&ke.set(F[0]),await ae("/labels")}else await ae("/labels/create")}catch(r){if(r&&typeof r=="object"&&"code"in r){const g=r;switch(g.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":e(4,o="Invalid email or password");break;case"auth/invalid-email":e(4,o="Invalid email address");break;case"auth/too-many-requests":e(4,o="Too many failed attempts. Please try again later.");break;default:e(4,o=g.message||"An error occurred during login")}}else e(4,o=r instanceof Error?r.message:"An error occurred during login")}finally{e(2,p=!1)}}async function M(){e(4,o=""),e(3,c=!0);try{const r=await Te();!r.success&&r.error&&e(4,o=r.error)}catch(r){if(r&&typeof r=="object"&&"code"in r){const g=r;g.code==="auth/popup-closed-by-user"?e(4,o="Sign-in cancelled"):e(4,o=g.message||"Google sign-in failed")}else e(4,o=r instanceof Error?r.message:"Google sign-in failed")}finally{e(3,c=!1)}}function D(r){a=r,e(0,a)}function u(r){l=r,e(1,l)}return[a,l,p,c,o,V,M,D,u]}class We extends _e{constructor(s){super(),be(this,s,Me,He,fe,{})}}export{We as component};
