import{s as te,d,w as ee,I as Dt,i as nt,b as a,q as wt,l as v,D as lt,J as Bt,c as i,e as g,g as T,m as x,h as c,j as w,k as se,f as z,t as M,n as st,o as ae,v as Ot,K as Ft,a as rt}from"../chunks/DjsGgg0N.js";import{S as le,i as re,d as Gt,t as _t,a as ut,e as Ut,m as Wt,c as Xt,b as Yt,g as Zt}from"../chunks/cWIQy_G5.js";import{e as xt}from"../chunks/BV4LPSyA.js";import{i as qt,b as ne,j as oe}from"../chunks/DcUeqTlN.js";import{g as ie,c as ce,s as ue,b as de,f as jt,e as Et,P as ve,h as Rt}from"../chunks/ChO2LMN6.js";import{f as fe}from"../chunks/BKpNHhAM.js";import{B as _e}from"../chunks/CWWdc1ov.js";import{g as he}from"../chunks/Dfj9RPht.js";function zt(l,t,e){const s=l.slice();return s[18]=t[e],s[20]=e,s}function pe(l){let t;return{c(){t=M("← Back to Dashboard")},l(e){t=z(e,"← Back to Dashboard")},m(e,s){nt(e,t,s)},d(e){e&&d(t)}}}function me(l){let t,e,s=xt(l[3]),r=[];for(let n=0;n<s.length;n+=1)r[n]=Ht(zt(l,s,n));const f=n=>_t(r[n],1,1,()=>{r[n]=null});return{c(){t=c("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){t=i(n,"DIV",{class:!0});var _=g(t);for(let o=0;o<r.length;o+=1)r[o].l(_);_.forEach(d),this.h()},h(){v(t,"class","artists-grid svelte-1t7sl35")},m(n,_){nt(n,t,_);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(t,null);e=!0},p(n,_){if(_&9){s=xt(n[3]);let o;for(o=0;o<s.length;o+=1){const b=zt(n,s,o);r[o]?(r[o].p(b,_),ut(r[o],1)):(r[o]=Ht(b),r[o].c(),ut(r[o],1),r[o].m(t,null))}for(Zt(),o=s.length;o<r.length;o+=1)f(o);Ut()}},i(n){if(!e){for(let _=0;_<s.length;_+=1)ut(r[_]);e=!0}},o(n){r=r.filter(Boolean);for(let _=0;_<r.length;_+=1)_t(r[_]);e=!1},d(n){n&&d(t),ae(r,n)}}}function ge(l){let t,e="No artist performance data available";return{c(){t=c("div"),t.textContent=e,this.h()},l(s){t=i(s,"DIV",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-6hqcaj"&&(t.textContent=e),this.h()},h(){v(t,"class","empty-state svelte-1t7sl35")},m(s,r){nt(s,t,r)},p:st,i:st,o:st,d(s){s&&d(t)}}}function be(l){let t,e="Loading...";return{c(){t=c("div"),t.textContent=e,this.h()},l(s){t=i(s,"DIV",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-1wfwfdr"&&(t.textContent=e),this.h()},h(){v(t,"class","loading-state svelte-1t7sl35")},m(s,r){nt(s,t,r)},p:st,i:st,o:st,d(s){s&&d(t)}}}function Mt(l){let t,e=Rt(l[18].trend)+"",s,r;return{c(){t=c("span"),s=M(e),this.h()},l(f){t=i(f,"SPAN",{class:!0});var n=g(t);s=z(n,e),n.forEach(d),this.h()},h(){v(t,"class",r="trend "+Jt(l[18].trend)+" svelte-1t7sl35")},m(f,n){nt(f,t,n),a(t,s)},p(f,n){n&8&&e!==(e=Rt(f[18].trend)+"")&&rt(s,e),n&8&&r!==(r="trend "+Jt(f[18].trend)+" svelte-1t7sl35")&&v(t,"class",r)},d(f){f&&d(t)}}}function Kt(l){let t,e,s=l[18].stats.averageDecayFactor.toFixed(3)+"",r;return{c(){t=c("div"),e=M("Avg. Decay Factor: "),r=M(s),this.h()},l(f){t=i(f,"DIV",{class:!0});var n=g(t);e=z(n,"Avg. Decay Factor: "),r=z(n,s),n.forEach(d),this.h()},h(){v(t,"class","decay-info svelte-1t7sl35")},m(f,n){nt(f,t,n),a(t,e),a(t,r)},p(f,n){n&8&&s!==(s=f[18].stats.averageDecayFactor.toFixed(3)+"")&&rt(r,s)},d(f){f&&d(t)}}}function Ht(l){let t,e,s,r,f=l[20]+1+"",n,_,o,b,y=l[18].artistName+"",V,J,C,W=l[18].reports.length+"",k,X,O=l[18].reports.length!==1?"s":"",q,$,at,L,p,S,B,I,j,u,ht="Revenue",ot,P,N=jt(l[18].stats.totalRevenue)+"",et,it,G,Y,U="Streams",dt,h,D=Et(l[18].stats.totalStreams)+"",K,H,R,F,ct="Sales",Pt,vt,pt=Et(l[18].stats.totalSales)+"",mt,St,Nt,Z,Q=l[18].trend!==void 0&&Mt(l);p=new ve({props:{reports:l[18].reports,metric:l[0],height:150}});let A=l[18].stats.averageDecayFactor!==void 0&&Kt(l);return{c(){t=c("div"),e=c("div"),s=c("div"),r=M("#"),n=M(f),_=w(),o=c("div"),b=c("h3"),V=M(y),J=w(),C=c("p"),k=M(W),X=M(" report"),q=M(O),$=w(),Q&&Q.c(),at=w(),L=c("div"),Yt(p.$$.fragment),S=w(),B=c("div"),I=c("div"),j=c("div"),u=c("span"),u.textContent=ht,ot=w(),P=c("span"),et=M(N),it=w(),G=c("div"),Y=c("span"),Y.textContent=U,dt=w(),h=c("span"),K=M(D),H=w(),R=c("div"),F=c("span"),F.textContent=ct,Pt=w(),vt=c("span"),mt=M(pt),St=w(),A&&A.c(),Nt=w(),this.h()},l(m){t=i(m,"DIV",{class:!0});var E=g(t);e=i(E,"DIV",{class:!0});var tt=g(e);s=i(tt,"DIV",{class:!0});var Vt=g(s);r=z(Vt,"#"),n=z(Vt,f),Vt.forEach(d),_=T(tt),o=i(tt,"DIV",{class:!0});var gt=g(o);b=i(gt,"H3",{class:!0});var $t=g(b);V=z($t,y),$t.forEach(d),J=T(gt),C=i(gt,"P",{class:!0});var bt=g(C);k=z(bt,W),X=z(bt," report"),q=z(bt,O),bt.forEach(d),gt.forEach(d),$=T(tt),Q&&Q.l(tt),tt.forEach(d),at=T(E),L=i(E,"DIV",{class:!0});var Lt=g(L);Xt(p.$$.fragment,Lt),Lt.forEach(d),S=T(E),B=i(E,"DIV",{class:!0});var yt=g(B);I=i(yt,"DIV",{class:!0});var ft=g(I);j=i(ft,"DIV",{class:!0});var Ct=g(j);u=i(Ct,"SPAN",{class:!0,"data-svelte-h":!0}),x(u)!=="svelte-10vby9i"&&(u.textContent=ht),ot=T(Ct),P=i(Ct,"SPAN",{class:!0});var Qt=g(P);et=z(Qt,N),Qt.forEach(d),Ct.forEach(d),it=T(ft),G=i(ft,"DIV",{class:!0});var kt=g(G);Y=i(kt,"SPAN",{class:!0,"data-svelte-h":!0}),x(Y)!=="svelte-9z6meb"&&(Y.textContent=U),dt=T(kt),h=i(kt,"SPAN",{class:!0});var At=g(h);K=z(At,D),At.forEach(d),kt.forEach(d),H=T(ft),R=i(ft,"DIV",{class:!0});var It=g(R);F=i(It,"SPAN",{class:!0,"data-svelte-h":!0}),x(F)!=="svelte-9u5vfe"&&(F.textContent=ct),Pt=T(It),vt=i(It,"SPAN",{class:!0});var Tt=g(vt);mt=z(Tt,pt),Tt.forEach(d),It.forEach(d),ft.forEach(d),St=T(yt),A&&A.l(yt),yt.forEach(d),Nt=T(E),E.forEach(d),this.h()},h(){v(s,"class","artist-rank svelte-1t7sl35"),v(b,"class","svelte-1t7sl35"),v(C,"class","svelte-1t7sl35"),v(o,"class","artist-info svelte-1t7sl35"),v(e,"class","card-header svelte-1t7sl35"),v(L,"class","card-chart svelte-1t7sl35"),v(u,"class","stat-label svelte-1t7sl35"),v(P,"class","stat-value svelte-1t7sl35"),v(j,"class","stat svelte-1t7sl35"),v(Y,"class","stat-label svelte-1t7sl35"),v(h,"class","stat-value svelte-1t7sl35"),v(G,"class","stat svelte-1t7sl35"),v(F,"class","stat-label svelte-1t7sl35"),v(vt,"class","stat-value svelte-1t7sl35"),v(R,"class","stat svelte-1t7sl35"),v(I,"class","stat-row svelte-1t7sl35"),v(B,"class","card-stats svelte-1t7sl35"),v(t,"class","artist-card svelte-1t7sl35")},m(m,E){nt(m,t,E),a(t,e),a(e,s),a(s,r),a(s,n),a(e,_),a(e,o),a(o,b),a(b,V),a(o,J),a(o,C),a(C,k),a(C,X),a(C,q),a(e,$),Q&&Q.m(e,null),a(t,at),a(t,L),Wt(p,L,null),a(t,S),a(t,B),a(B,I),a(I,j),a(j,u),a(j,ot),a(j,P),a(P,et),a(I,it),a(I,G),a(G,Y),a(G,dt),a(G,h),a(h,K),a(I,H),a(I,R),a(R,F),a(R,Pt),a(R,vt),a(vt,mt),a(B,St),A&&A.m(B,null),a(t,Nt),Z=!0},p(m,E){(!Z||E&8)&&y!==(y=m[18].artistName+"")&&rt(V,y),(!Z||E&8)&&W!==(W=m[18].reports.length+"")&&rt(k,W),(!Z||E&8)&&O!==(O=m[18].reports.length!==1?"s":"")&&rt(q,O),m[18].trend!==void 0?Q?Q.p(m,E):(Q=Mt(m),Q.c(),Q.m(e,null)):Q&&(Q.d(1),Q=null);const tt={};E&8&&(tt.reports=m[18].reports),E&1&&(tt.metric=m[0]),p.$set(tt),(!Z||E&8)&&N!==(N=jt(m[18].stats.totalRevenue)+"")&&rt(et,N),(!Z||E&8)&&D!==(D=Et(m[18].stats.totalStreams)+"")&&rt(K,D),(!Z||E&8)&&pt!==(pt=Et(m[18].stats.totalSales)+"")&&rt(mt,pt),m[18].stats.averageDecayFactor!==void 0?A?A.p(m,E):(A=Kt(m),A.c(),A.m(B,null)):A&&(A.d(1),A=null)},i(m){Z||(ut(p.$$.fragment,m),Z=!0)},o(m){_t(p.$$.fragment,m),Z=!1},d(m){m&&d(t),Q&&Q.d(),Gt(p),A&&A.d()}}}function ye(l){let t,e,s,r,f,n,_="Performance by Artist",o,b,y,V,J="Last 7 days",C,W="Last 30 days",k,X="Last 90 days",O,q="Last 6 months",$,at="Last year",L,p,S,B="Sort by Revenue",I,j="Sort by Streams",u,ht="Sort by Sales",ot,P,N,et,it,G;r=new _e({props:{style:"hollow",color:"gray",$$slots:{default:[pe]},$$scope:{ctx:l}}}),r.$on("clicked",l[15]);const Y=[be,ge,me],U=[];function dt(h,D){return h[2]?0:h[3].length===0?1:2}return P=dt(l),N=U[P]=Y[P](l),{c(){t=c("div"),e=c("div"),s=c("div"),Yt(r.$$.fragment),f=w(),n=c("h1"),n.textContent=_,o=w(),b=c("div"),y=c("select"),V=c("option"),V.textContent=J,C=c("option"),C.textContent=W,k=c("option"),k.textContent=X,O=c("option"),O.textContent=q,$=c("option"),$.textContent=at,L=w(),p=c("select"),S=c("option"),S.textContent=B,I=c("option"),I.textContent=j,u=c("option"),u.textContent=ht,ot=w(),N.c(),this.h()},l(h){t=i(h,"DIV",{class:!0});var D=g(t);e=i(D,"DIV",{class:!0});var K=g(e);s=i(K,"DIV",{class:!0});var H=g(s);Xt(r.$$.fragment,H),f=T(H),n=i(H,"H1",{class:!0,"data-svelte-h":!0}),x(n)!=="svelte-6oz36c"&&(n.textContent=_),H.forEach(d),o=T(K),b=i(K,"DIV",{class:!0});var R=g(b);y=i(R,"SELECT",{class:!0});var F=g(y);V=i(F,"OPTION",{"data-svelte-h":!0}),x(V)!=="svelte-12vykyh"&&(V.textContent=J),C=i(F,"OPTION",{"data-svelte-h":!0}),x(C)!=="svelte-rt445"&&(C.textContent=W),k=i(F,"OPTION",{"data-svelte-h":!0}),x(k)!=="svelte-hz9j5l"&&(k.textContent=X),O=i(F,"OPTION",{"data-svelte-h":!0}),x(O)!=="svelte-1rmvjpo"&&(O.textContent=q),$=i(F,"OPTION",{"data-svelte-h":!0}),x($)!=="svelte-h7qlg3"&&($.textContent=at),F.forEach(d),L=T(R),p=i(R,"SELECT",{class:!0});var ct=g(p);S=i(ct,"OPTION",{"data-svelte-h":!0}),x(S)!=="svelte-1j5b5ph"&&(S.textContent=B),I=i(ct,"OPTION",{"data-svelte-h":!0}),x(I)!=="svelte-7s6kvz"&&(I.textContent=j),u=i(ct,"OPTION",{"data-svelte-h":!0}),x(u)!=="svelte-1kwgtud"&&(u.textContent=ht),ct.forEach(d),R.forEach(d),K.forEach(d),ot=T(D),N.l(D),D.forEach(d),this.h()},h(){v(n,"class","svelte-1t7sl35"),v(s,"class","header-left svelte-1t7sl35"),V.__value=7,lt(V,V.__value),C.__value=30,lt(C,C.__value),k.__value=90,lt(k,k.__value),O.__value=180,lt(O,O.__value),$.__value=365,lt($,$.__value),v(y,"class","date-range-select svelte-1t7sl35"),l[1]===void 0&&Bt(()=>l[16].call(y)),S.__value="revenue",lt(S,S.__value),I.__value="streams",lt(I,I.__value),u.__value="sales",lt(u,u.__value),v(p,"class","metric-select svelte-1t7sl35"),l[0]===void 0&&Bt(()=>l[17].call(p)),v(b,"class","header-controls svelte-1t7sl35"),v(e,"class","page-header svelte-1t7sl35"),v(t,"class","detail-page svelte-1t7sl35")},m(h,D){nt(h,t,D),a(t,e),a(e,s),Wt(r,s,null),a(s,f),a(s,n),a(e,o),a(e,b),a(b,y),a(y,V),a(y,C),a(y,k),a(y,O),a(y,$),Dt(y,l[1],!0),a(b,L),a(b,p),a(p,S),a(p,I),a(p,u),Dt(p,l[0],!0),a(t,ot),U[P].m(t,null),et=!0,it||(G=[wt(y,"change",l[16]),wt(p,"change",l[17])],it=!0)},p(h,[D]){const K={};D&2097152&&(K.$$scope={dirty:D,ctx:h}),r.$set(K),D&2&&Dt(y,h[1]),D&1&&Dt(p,h[0]);let H=P;P=dt(h),P===H?U[P].p(h,D):(Zt(),_t(U[H],1,1,()=>{U[H]=null}),Ut(),N=U[P],N?N.p(h,D):(N=U[P]=Y[P](h),N.c()),ut(N,1),N.m(t,null))},i(h){et||(ut(r.$$.fragment,h),ut(N),et=!0)},o(h){_t(r.$$.fragment,h),_t(N),et=!1},d(h){h&&d(t),Gt(r),U[P].d(),it=!1,ee(G)}}}function Jt(l){return l?l>=0?"trend-positive":"trend-negative":""}function Ce(l,t,e){let s,r,f,n,_,o,b,y,V,J,C=st,W=()=>(C(),C=Ot(o,u=>e(11,J=u)),o),k,X=st,O=()=>(X(),X=Ot(n,u=>e(12,k=u)),n),q,$=st,at=()=>($(),$=Ot(f,u=>e(13,q=u)),f),L;se(l,ne,u=>e(14,L=u)),l.$$.on_destroy.push(()=>C()),l.$$.on_destroy.push(()=>X()),l.$$.on_destroy.push(()=>$());let p="revenue",S=30;const B=()=>he("/labels/finances");function I(){S=Ft(this),e(1,S)}function j(){p=Ft(this),e(0,p)}return l.$$.update=()=>{l.$$.dirty&16384&&e(9,s=(L==null?void 0:L.id)||""),l.$$.dirty&2&&e(10,r=ie(S)),l.$$.dirty&1536&&at(e(6,f=ce(s,r))),l.$$.dirty&512&&O(e(5,n=qt({queryKey:["tracks","label",s],queryFn:()=>fe(s),enabled:!!s}))),l.$$.dirty&4096&&e(8,_=k.data?Array.from(new Set(k.data.flatMap(u=>u.artistId))):[]),l.$$.dirty&256&&W(e(4,o=qt({queryKey:["artists","byIds",_.sort().join(",")],queryFn:()=>oe(_),enabled:_.length>0}))),l.$$.dirty&2048&&e(7,b=new Map((J.data||[]).map(u=>[u.id,{id:u.id,name:`${u.firstName} ${u.lastName}`}]))),l.$$.dirty&12417&&e(3,y=q.data&&k.data&&b.size>0?ue(de(q.data,k.data,b),p):[]),l.$$.dirty&14336&&e(2,V=q.isLoading||k.isLoading||J.isLoading)},[p,S,V,y,o,n,f,b,_,s,r,J,k,q,L,B,I,j]}class Oe extends le{constructor(t){super(),re(this,t,Ce,ye,te,{})}}export{Oe as component};
